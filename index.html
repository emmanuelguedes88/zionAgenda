import React, { useState, useEffect, useRef } from 'react';
import { initializeApp } from 'firebase/app';
import { 
  getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, 
  onAuthStateChanged, signOut 
} from 'firebase/auth';
import { getFirestore, doc, setDoc, onSnapshot } from 'firebase/firestore';
import { 
  User, MapPin, Church, BookOpen, Users, Briefcase, FileText, 
  Printer, Plus, Minus, ChevronRight, ChevronLeft, 
  Calendar, Building2, Heart, Coins, ShieldCheck,
  Star, Smartphone, LogOut, Lock, Mail, Eye, EyeOff, 
  AlertCircle, Loader2, Wine, Waves, ScrollText, Clock, FileDown, CheckCircle2
} from 'lucide-react';

// --- CONFIGURA√á√ÉO DIRETA PARA VERCEL ---
const firebaseConfig = {
  apiKey: "AIzaSyA-Ein7ax-djeF8IXF_mXc3IfsLYN_itWU",
  authDomain: "agendaipb.firebaseapp.com",
  projectId: "agendaipb",
  storageBucket: "agendaipb.firebasestorage.app",
  messagingSenderId: "811819165566",
  appId: "1:811819165566:web:ed4bdde94ac1e70ba4752f",
  measurementId: "G-YVSKQVFRQ1"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const DB_COLLECTION = "relatorio-presbiteriano-v16";

const INITIAL_STATE = {
  header: { ano: '2025', sinodo: '', presbiterio: '' },
  identificacao: {
    nome: '', filiacao: '', dataNascimento: '', localNascimento: '', ufNascimento: '',
    rg: '', orgaoEmissor: '', cpf: '', estadoCivil: 'Casado', conjuge: '', niverConjuge: '',
    dependentes: '0', endereco: '', bairro: '', cidade: '', uf: '', cep: '', numero: '',
    complemento: '', telefone: '', celular: '', email: '', igreja: '',
    moradia: 'pastoral', localizacaoMoradia: 'dentro', 
    dataOrdenacao: '', dedicacao: 'integral', ferias: 'regulares', 
    congruas: '', aposentadoriaPublica: false, aposentadoriaPrivada: false,
    planoSaude: false, inssSobreCongrua: false, valorInss: '', previdenciaPrivada: false
  },
  campoTrabalho: { igrejas: '', congregacoes: '' },
  atuacaoMinisterial: {
    doutrinacao: [
      { id: 'pregacao', label: 'üìñ Prega√ß√µes', noCampo: 0, foraCampo: 0 },
      { id: 'ed', label: 'üè´ Aulas de Escola Dominical', noCampo: 0, foraCampo: 0 },
      { id: 'evangelizacao', label: 'üì¢ Evangeliza√ß√£o', noCampo: 0, foraCampo: 0 },
      { id: 'estudo', label: 'üîç Estudo B√≠blico', noCampo: 0, foraCampo: 0 },
      { id: 'palestras', label: 'üé§ Palestras', noCampo: 0, foraCampo: 0 },
      { id: 'prelecoes', label: 'üéñÔ∏è Prele√ß√µes Especiais', noCampo: 0, foraCampo: 0 },
      { id: 'media', label: 'üì∫ R√°dio/TV', noCampo: 0, foraCampo: 0 },
      { id: 'artigos', label: '‚úçÔ∏è Artigos (Jornais/Revistas)', noCampo: 0, foraCampo: 0 },
      { id: 'entrevistas', label: 'üéôÔ∏è Entrevistas', noCampo: 0, foraCampo: 0 },
    ],
    atos: [
      { id: 'ceias', label: 'üç∑ Santas Ceias', noCampo: 0, foraCampo: 0 },
      { id: 'casamentos', label: 'üíç B√™n√ß√£os N√∫pcias', noCampo: 0, foraCampo: 0 },
      { id: 'funerais', label: 'üïäÔ∏è Funerais', noCampo: 0, foraCampo: 0 },
      { id: 'batismos_infantis', label: 'üë∂ Batismos Infantis', noCampo: 0, foraCampo: 0 },
      { id: 'profissoes', label: 'ü§ù Profiss√µes de F√©', noCampo: 0, foraCampo: 0 },
      { id: 'profissao_batismo', label: 'üåä Profiss√£o e Batismo', noCampo: 0, foraCampo: 0 },
    ],
    assistencia: [
      { id: 'aconselhamento', label: 'üó£Ô∏è Aconselhamento', noCampo: 0, foraCampo: 0 },
      { id: 'visitas', label: 'üè† Visitas (Lares)', noCampo: 0, foraCampo: 0 },
      { id: 'pontos', label: 'üìç Pontos de Prega√ß√£o', noCampo: 0, foraCampo: 0 },
      { id: 'missoes', label: 'üåç Miss√µes', noCampo: 0, foraCampo: 0 },
      { id: 'departamentos', label: 'üë• Departamentos', noCampo: 0, foraCampo: 0 },
    ]
  },
  atuacaoConciliar: {
    concilios: [
      { id: 'conselho', label: 'üèõÔ∏è Reuni√µes Conselho', noCampo: 0, foraCampo: 0 },
      { id: 'assembleias', label: 'üó≥Ô∏è Assembleias Gerais', noCampo: 0, foraCampo: 0 },
      { id: 'presbiterio', label: 'üìê Reuni√µes Presbit√©rio', noCampo: 0, foraCampo: 0 },
      { id: 'sinodo', label: 'üó∫Ô∏è Reuni√µes S√≠nodo', noCampo: 0, foraCampo: 0 },
      { id: 'sc', label: '‚öñÔ∏è Reuni√µes S. Conc√≠lio', noCampo: 0, foraCampo: 0 },
    ],
    cargos: { presbiterio: '', sinodo: '', sc: '', juntas: '', textoComplementar: '' }
  },
  outrasAtividades: { local: '', dataGeracao: new Date().toLocaleDateString('pt-BR') }
};

export default function App() {
  const [user, setUser] = useState(null);
  const [report, setReport] = useState(INITIAL_STATE);
  const [tab, setTab] = useState(0);
  const [loading, setLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [isGenerating, setIsGenerating] = useState(false);
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [isRegistering, setIsRegistering] = useState(false);
  const [authError, setAuthError] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const reportRef = useRef(null);

  // Injetar o motor de PDF externo
  useEffect(() => {
    const script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
    script.async = true;
    document.body.appendChild(script);
  }, []);

  useEffect(() => {
    const unsub = onAuthStateChanged(auth, (u) => {
      setUser(u);
      if (!u) setLoading(false);
    });
    return () => unsub();
  }, []);

  useEffect(() => {
    if (!user) return;
    const docRef = doc(db, 'artifacts', DB_COLLECTION, 'users', user.uid, 'data', 'relatorio');
    const unsub = onSnapshot(docRef, (snap) => {
      if (snap.exists()) setReport(prev => ({ ...prev, ...snap.data() }));
      else setDoc(docRef, INITIAL_STATE);
      setLoading(false);
    });
    return () => unsub();
  }, [user]);

  const save = async (data) => {
    if (!user) return;
    setIsSaving(true);
    try {
      await setDoc(doc(db, 'artifacts', DB_COLLECTION, 'users', user.uid, 'data', 'relatorio'), data);
    } catch (e) { console.error(e); }
    finally { setIsSaving(false); }
  };

  const updateCounter = (section, listKey, id, field, delta) => {
    const list = [...report[section][listKey]];
    const idx = list.findIndex(i => i.id === id);
    if (idx !== -1) list[idx][field] = Math.max(0, (list[idx][field] || 0) + delta);
    const updated = { ...report, [section]: { ...report[section], [listKey]: list } };
    setReport(updated);
    save(updated);
  };

  const handleUpdate = (section, field, value) => {
    const updated = { ...report, [section]: { ...report[section], [field]: value } };
    setReport(updated);
    save(updated);
  };

  const generatePDF = () => {
    if (!window.html2pdf) {
      alert("Carregando motor de PDF...");
      return;
    }
    setIsGenerating(true);
    const element = reportRef.current;
    const opt = {
      margin: 10,
      filename: `Relatorio_IPB_${report.header.ano}.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };
    window.html2pdf().from(element).set(opt).save().finally(() => setIsGenerating(false));
  };

  if (loading) return <div className="h-screen flex items-center justify-center"><Loader2 className="animate-spin text-indigo-600" /></div>;

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-50 flex items-center justify-center p-6">
        <div className="w-full max-w-md bg-white p-8 rounded-[40px] shadow-2xl border border-slate-100">
          <div className="text-center mb-8">
            <Star className="text-amber-400 fill-amber-400 mx-auto mb-2" size={40} />
            <h1 className="text-2xl font-black text-slate-800">Acesso Ministerial</h1>
            <p className="text-slate-400 text-xs font-bold uppercase tracking-widest mt-1">Igreja Presbiteriana do Brasil</p>
          </div>
          <form onSubmit={(e) => {
            e.preventDefault();
            setAuthError('');
            if (isRegistering) createUserWithEmailAndPassword(auth, email, password).catch(() => setAuthError("Erro no cadastro"));
            else signInWithEmailAndPassword(auth, email, password).catch(() => setAuthError("E-mail ou senha incorretos"));
          }} className="space-y-4">
            <InputField label="E-mail" type="email" value={email} onChange={setEmail} />
            <div className="relative">
              <InputField label="Senha" type={showPassword ? "text" : "password"} value={password} onChange={setPassword} />
              <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute right-4 top-9 text-slate-300">
                {showPassword ? <EyeOff size={16}/> : <Eye size={16}/>}
              </button>
            </div>
            {authError && <p className="text-red-500 text-[10px] font-bold">{authError}</p>}
            <button className="w-full bg-slate-900 text-white py-4 rounded-2xl font-bold uppercase tracking-widest">Entrar</button>
          </form>
          <button onClick={() => setIsRegistering(!isRegistering)} className="w-full mt-6 text-xs font-bold text-indigo-600 uppercase">
            {isRegistering ? "Voltar ao Login" : "Primeiro Acesso? Criar conta"}
          </button>
        </div>
      </div>
    );
  }

  const tabs = [
    { label: 'Agenda', icon: <Clock size={18} /> },
    { label: 'Identidade', icon: <User size={18} /> },
    { label: 'Atua√ß√£o', icon: <Church size={18} /> },
    { label: 'Relat√≥rio', icon: <Printer size={18} /> }
  ];

  return (
    <div className="min-h-screen bg-slate-50 pb-24 font-sans text-slate-900">
      
      {/* HEADER */}
      <header className="bg-white border-b p-4 flex justify-between items-center sticky top-0 z-50">
        <div className="flex items-center gap-3">
          <div className="bg-indigo-900 p-1.5 rounded-lg text-white shadow-lg"><Star size={16} fill="white" /></div>
          <h1 className="text-xs font-black uppercase tracking-tighter">Agenda do Ministro</h1>
        </div>
        <div className="flex items-center gap-3">
          {isSaving && <CheckCircle2 className="text-emerald-500" size={16} />}
          <button onClick={() => signOut(auth)} className="text-slate-300 hover:text-red-500 transition-colors"><LogOut size={18} /></button>
        </div>
      </header>

      {/* TABS */}
      <nav className="bg-white border-b flex sticky top-[57px] z-40 shadow-sm">
        {tabs.map((t, i) => (
          <button key={i} onClick={() => setTab(i)}
            className={`flex-1 flex flex-col items-center py-3 text-[9px] font-black uppercase tracking-widest transition-all border-b-4 ${
              tab === i ? 'border-indigo-600 text-indigo-600 bg-indigo-50/20' : 'border-transparent text-slate-300'
            }`}
          >
            {t.icon}
          </button>
        ))}
      </nav>

      <main className="max-w-4xl mx-auto p-4 md:p-8 space-y-6">
        
        {/* AGENDA */}
        {tab === 0 && (
          <div className="space-y-6 animate-in fade-in">
            <div className="bg-slate-900 p-8 rounded-[32px] text-white shadow-xl flex justify-between items-center relative overflow-hidden">
              <div className="relative z-10">
                <p className="text-indigo-400 text-[10px] font-black uppercase mb-1">Registro Ministerial</p>
                <h2 className="text-2xl font-black">{new Date().toLocaleDateString('pt-BR', { day: 'numeric', month: 'long' })}</h2>
              </div>
              <Clock size={40} className="text-slate-800 absolute -right-2 -bottom-2" />
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <QuickAdd title="Doutrina√ß√£o" items={report.atuacaoMinisterial.doutrinacao} onAdd={(id) => updateCounter('atuacaoMinisterial', 'doutrinacao', id, 'noCampo', 1)} />
              <QuickAdd title="Atos Pastorais" items={report.atuacaoMinisterial.atos} onAdd={(id) => updateCounter('atuacaoMinisterial', 'atos', id, 'noCampo', 1)} />
            </div>
          </div>
        )}

        {/* IDENTIFICA√á√ÉO DETALHADA */}
        {tab === 1 && (
          <div className="space-y-6 animate-in fade-in">
            <Section title="üìë Dados do Per√≠odo" icon={<FileText size={18} />}>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <InputField label="Ano Civil" value={report.header.ano} onChange={v => handleUpdate('header', 'ano', v)} />
                <InputField label="S√≠nodo" value={report.header.sinodo} onChange={v => handleUpdate('header', 'sinodo', v)} />
                <InputField label="Presbit√©rio" value={report.header.presbiterio} onChange={v => handleUpdate('header', 'presbiterio', v)} />
              </div>
            </Section>
            <Section title="üë§ Identifica√ß√£o" icon={<User size={18} />}>
              <div className="space-y-4">
                <InputField label="Nome Completo" value={report.identificacao.nome} onChange={v => handleUpdate('identificacao', 'nome', v)} />
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <InputField label="RG" value={report.identificacao.rg} onChange={v => handleUpdate('identificacao', 'rg', v)} />
                  <InputField label="CPF" value={report.identificacao.cpf} onChange={v => handleUpdate('identificacao', 'cpf', v)} />
                  <InputField label="Nascimento" type="date" value={report.identificacao.dataNascimento} onChange={v => handleUpdate('identificacao', 'dataNascimento', v)} />
                </div>
              </div>
            </Section>
            <Section title="üí∞ Financeiro e Moradia" icon={<Home size={18} />}>
              <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                <InputField label="Congruas (R$)" value={report.identificacao.congruas} onChange={v => handleUpdate('identificacao', 'congruas', v)} />
                <InputField label="Valor INSS" value={report.identificacao.valorInss} onChange={v => handleUpdate('identificacao', 'valorInss', v)} />
                <SelectField label="Condi√ß√µes Moradia" value={report.identificacao.moradia} options={{pastoral: 'Pastoral', aluguel: 'Aluguel', propria: 'Pr√≥pria'}} onChange={v => handleUpdate('identificacao', 'moradia', v)} />
              </div>
            </Section>
          </div>
        )}

        {/* ATUA√á√ÉO */}
        {tab === 2 && (
          <div className="space-y-8 animate-in fade-in">
             <StatTable title="1. Doutrina√ß√£o" icon={<BookOpen size={18} />} items={report.atuacaoMinisterial.doutrinacao} onDelta={(id, f, d) => updateCounter('atuacaoMinisterial', 'doutrinacao', id, f, d)} />
             <StatTable title="2. Atos Pastorais" icon={<Wine size={18} />} items={report.atuacaoMinisterial.atos} onDelta={(id, f, d) => updateCounter('atuacaoMinisterial', 'atos', id, f, d)} />
          </div>
        )}

        {/* RELAT√ìRIO PDF */}
        {tab === 3 && (
          <div className="space-y-6 animate-in zoom-in-95 duration-500">
            <div className="bg-indigo-950 text-white p-10 rounded-[40px] text-center shadow-2xl relative overflow-hidden">
              <Printer size={48} className="mx-auto mb-6 text-amber-400" />
              <h2 className="text-2xl font-black mb-4">Gerar Relat√≥rio IPB</h2>
              <button 
                onClick={generatePDF}
                disabled={isGenerating}
                className="w-full max-w-sm bg-white text-indigo-950 py-5 rounded-[24px] font-black uppercase tracking-widest shadow-xl flex items-center justify-center gap-3 active:scale-95 disabled:opacity-50"
              >
                {isGenerating ? <Loader2 className="animate-spin" /> : <FileDown size={22} />}
                {isGenerating ? "CRIANDO PDF..." : "BAIXAR PDF AGORA"}
              </button>
            </div>

            {/* FOLHA DO RELAT√ìRIO (REF PARA PDF) */}
            <div className="bg-white p-8 md:p-16 text-slate-900 border border-slate-200 shadow-xl mx-auto w-full max-w-[850px] font-serif leading-tight">
               <div ref={reportRef}>
                  <div className="text-center border-b-2 border-black pb-4 mb-10">
                    <h1 className="text-2xl font-bold uppercase">Relat√≥rio do Ministro Presbiteriano</h1>
                    <p className="text-[10px] font-bold uppercase mt-2">ANO: {report.header.ano} | S√çNODO: {report.header.sinodo} | PRESBIT√âRIO: {report.header.presbiterio}</p>
                  </div>
                  <div className="space-y-10 text-[12px]">
                    <section>
                      <h2 className="bg-slate-50 p-1 font-bold border-l-4 border-black mb-4 uppercase">I - Identifica√ß√£o</h2>
                      <div className="grid grid-cols-2 gap-y-2">
                        <p><strong>Nome:</strong> {report.identificacao.nome}</p>
                        <p><strong>CPF:</strong> {report.identificacao.cpf} | <strong>RG:</strong> {report.identificacao.rg}</p>
                        <p><strong>Data de Nascimento:</strong> {report.identificacao.dataNascimento}</p>
                        <p><strong>Condi√ß√µes de Moradia:</strong> {report.identificacao.moradia}</p>
                      </div>
                    </section>
                    <section>
                      <h2 className="bg-slate-50 p-1 font-bold border-l-4 border-black mb-4 uppercase">II - Atua√ß√£o Ministerial</h2>
                      <div className="grid grid-cols-2 gap-16">
                        <div>
                          <p className="font-bold border-b border-black mb-2 uppercase text-[10px]">Doutrina√ß√£o</p>
                          {report.atuacaoMinisterial.doutrinacao.map(i => (
                            <div key={i.id} className="flex justify-between py-1 border-b border-slate-50">
                              <span>{i.label.substring(3)}</span> <strong>{i.noCampo + i.foraCampo}</strong>
                            </div>
                          ))}
                        </div>
                        <div>
                          <p className="font-bold border-b border-black mb-2 uppercase text-[10px]">Atos Pastorais</p>
                          {report.atuacaoMinisterial.atos.map(i => (
                            <div key={i.id} className="flex justify-between py-1 border-b border-slate-50">
                              <span>{i.label.substring(3)}</span> <strong>{i.noCampo + i.foraCampo}</strong>
                            </div>
                          ))}
                        </div>
                      </div>
                    </section>
                    <div className="pt-24 flex justify-around text-center">
                      <div className="w-64 border-t border-black pt-2">Local e Data</div>
                      <div className="w-64 border-t border-black pt-2">Assinatura do Ministro</div>
                    </div>
                  </div>
               </div>
            </div>
          </div>
        )}
      </main>

      {/* FOOTER NAV */}
      <footer className="fixed bottom-0 inset-x-0 bg-white border-t p-4 flex justify-between items-center md:hidden z-50">
        <button disabled={tab === 0} onClick={() => setTab(t => t - 1)} className="p-4 bg-slate-100 text-indigo-600 rounded-2xl"><ChevronLeft size={24} /></button>
        <span className="text-[10px] font-black text-slate-300 uppercase tracking-widest">{tab + 1} / {tabs.length}</span>
        <button disabled={tab === tabs.length - 1} onClick={() => setTab(t => t + 1)} className="p-4 bg-slate-100 text-indigo-600 rounded-2xl"><ChevronRight size={24} /></button>
      </footer>
    </div>
  );
}

// --- AUXILIARES ---

function QuickAdd({ title, items, onAdd }) {
  return (
    <div className="bg-white p-6 rounded-[28px] shadow-sm border border-slate-100">
      <h3 className="font-black text-slate-400 text-[10px] uppercase tracking-widest mb-4 border-b pb-2">{title}</h3>
      <div className="space-y-2">
        {items.map(item => (
          <button key={item.id} onClick={() => onAdd(item.id)}
            className="w-full flex items-center justify-between p-4 rounded-2xl bg-slate-50 hover:bg-indigo-600 hover:text-white transition-all active:scale-95 group"
          >
            <span className="text-xs font-bold">{item.label}</span>
            <Plus size={16} className="text-indigo-600 group-hover:text-white" />
          </button>
        ))}
      </div>
    </div>
  );
}

function Section({ icon, title, children }) {
  return (
    <div className="bg-white rounded-[28px] p-6 shadow-sm border border-slate-100">
      <div className="flex items-center gap-3 text-indigo-600 mb-6 border-b pb-2">
        {icon} <h2 className="text-[10px] font-black uppercase tracking-[2px]">{title}</h2>
      </div>
      <div>{children}</div>
    </div>
  );
}

function StatTable({ title, icon, items, onDelta }) {
  return (
    <div className="bg-white rounded-[32px] p-8 shadow-sm border border-slate-100">
      <div className="flex items-center gap-3 text-indigo-600 mb-8 border-b pb-4">
        {icon} <h3 className="font-black text-slate-600 text-[11px] uppercase tracking-[4px]">{title}</h3>
      </div>
      <div className="space-y-4">
        <div className="grid grid-cols-12 gap-2 text-[8px] font-black text-slate-300 uppercase px-1">
          <div className="col-span-6">Descri√ß√£o</div>
          <div className="col-span-3 text-center">No Campo</div>
          <div className="col-span-3 text-center">Fora</div>
        </div>
        {items.map(item => (
          <div key={item.id} className="grid grid-cols-12 gap-4 items-center py-2 border-b last:border-0 border-slate-50">
            <div className="col-span-6 text-[10px] font-bold text-slate-700 leading-tight pr-2">{item.label}</div>
            <div className="col-span-3">
              <Counter value={item.noCampo} onInc={() => onDelta(item.id, 'noCampo', 1)} onDec={() => onDelta(item.id, 'noCampo', -1)} />
            </div>
            <div className="col-span-3">
              <Counter value={item.foraCampo} onInc={() => onDelta(item.id, 'foraCampo', 1)} onDec={() => onDelta(item.id, 'foraCampo', -1)} />
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

function Counter({ value, onInc, onDec }) {
  return (
    <div className="flex items-center justify-between bg-slate-50 p-1 rounded-xl border border-slate-100 w-full min-w-[70px] h-[38px]">
      <button onClick={onDec} className="w-7 h-7 flex items-center justify-center hover:bg-white rounded-lg text-slate-300 hover:text-red-500 active:scale-75 transition-all"><Minus size={12} /></button>
      <div className="flex-1 flex items-center justify-center">
         <span className="text-[12px] font-black text-indigo-950 leading-none h-4 flex items-center justify-center">{value || 0}</span>
      </div>
      <button onClick={onInc} className="w-7 h-7 flex items-center justify-center hover:bg-white rounded-lg text-slate-300 hover:text-indigo-600 active:scale-75 transition-all"><Plus size={12} /></button>
    </div>
  );
}

function InputField({ label, value, onChange, type = "text" }) {
  return (
    <div className="flex flex-col group w-full">
      <label className="text-[8px] font-black text-slate-400 uppercase mb-1 ml-1 group-focus-within:text-indigo-600 transition-colors">{label}</label>
      <input type={type} value={value || ''} onChange={e => onChange(e.target.value)}
        className="bg-slate-50 border-2 border-slate-50 rounded-xl px-4 py-3 text-sm font-bold focus:bg-white focus:border-indigo-600 outline-none transition-all"
      />
    </div>
  );
}

function TextAreaField({ label, value, onChange }) {
  return (
    <div className="flex flex-col w-full group">
      <label className="text-[8px] font-black text-slate-400 uppercase mb-1 ml-1 group-focus-within:text-indigo-600 transition-colors">{label}</label>
      <textarea value={value || ''} onChange={e => onChange(e.target.value)}
        className="bg-slate-50 border-2 border-slate-50 rounded-xl px-4 py-3 text-sm font-bold focus:bg-white focus:border-indigo-600 outline-none transition-all min-h-[80px]"
      />
    </div>
  );
}

function SelectField({ label, value, options, onChange }) {
  return (
    <div className="flex flex-col w-full group">
      <label className="text-[8px] font-black text-slate-400 uppercase mb-1 ml-1 group-focus-within:text-indigo-600 transition-colors">{label}</label>
      <select value={value || ''} onChange={e => onChange(e.target.value)}
        className="bg-slate-50 border-2 border-slate-50 rounded-xl px-4 py-3 text-sm font-bold focus:bg-white focus:border-indigo-600 outline-none transition-all"
      >
        {Array.isArray(options) ? options.map(o => <option key={o} value={o}>{o}</option>) : Object.entries(options).map(([k, v]) => <option key={k} value={k}>{v}</option>)}
      </select>
    </div>
  );
}

function Checkbox({ label, checked, onChange }) {
  return (
    <label className="flex items-center gap-3 cursor-pointer group p-1">
      <div className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${checked ? 'bg-indigo-600 border-indigo-600 shadow-md' : 'bg-white border-slate-200 group-hover:border-indigo-300'}`}>
        {checked && <div className="w-1.5 h-1.5 bg-white rounded-full"></div>}
      </div>
      <input type="checkbox" className="hidden" checked={checked} onChange={e => onChange(e.target.checked)} />
      <span className="text-[10px] font-black text-slate-500 uppercase tracking-tighter group-hover:text-indigo-600 transition-colors">{label}</span>
    </label>
  );
}

